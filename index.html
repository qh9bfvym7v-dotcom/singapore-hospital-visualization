<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wheel Game - Help Me Decide What to Eat Today</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            padding: 40px;
            position: relative;
            overflow: hidden;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px dashed #ff7676;
        }
        
        h1 {
            color: #ff6b6b;
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 0px rgba(255, 107, 107, 0.2);
        }
        
        .tagline {
            font-size: 1.2rem;
            color: #666;
            font-style: italic;
        }
        
        h2 {
            color: #ff9a76;
            margin: 30px 0 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ffeaa7;
            font-size: 1.8rem;
        }
        
        h3 {
            color: #fd9644;
            margin: 20px 0 10px;
            font-size: 1.4rem;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-bottom: 20px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        .visual-section {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin: 40px 0;
            justify-content: center;
        }
        
        .visual-item {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 2px solid #ffeaa7;
            transition: transform 0.3s ease;
        }
        
        .visual-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .visual-title {
            font-size: 1.3rem;
            color: #ff9a76;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .wheel-container {
            width: 100%;
            height: 350px;
            position: relative;
            margin: 20px auto;
        }
        
        .wheel {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            overflow: hidden;
            box-shadow: 0 0 0 10px #ffd8a6, 0 0 20px rgba(0, 0, 0, 0.2);
            transition: transform 3s cubic-bezier(0.2, 0.8, 0.3, 1);
        }
        
        .wheel-center {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #2d3436;
            border-radius: 50%;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            cursor: pointer;
        }
        
        .wheel-pointer {
            position: absolute;
            width: 40px;
            height: 40px;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
            color: #ff6b6b;
            font-size: 40px;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }
        
        .wheel-section {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right;
            left: 0;
            top: 0;
            background: #ff7676;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .wheel-text {
            position: absolute;
            transform-origin: center;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            font-size: 16px;
            width: 100%;
            text-align: center;
            padding-top: 20px;
            padding-right: 60px;
        }
        
        .result-display {
            background: #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: #d63031;
            border: 2px dashed #fdcb6e;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .spin-button {
            background: linear-gradient(135deg, #ff6b6b, #ff9a76);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }
        
        .spin-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.4);
        }
        
        .spin-button:active {
            transform: translateY(1px);
        }
        
        .spin-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .food-item {
            display: inline-block;
            background: #ff9a76;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 1.1rem;
        }
        
        .cooking-method {
            display: inline-block;
            background: #74b9ff;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 1.1rem;
        }
        
        .map-preview {
            width: 100%;
            height: 300px;
            background: #dfe6e9;
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
            border: 2px solid #b2bec3;
        }
        
        .map-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #636e72;
            font-style: italic;
            background: linear-gradient(45deg, #f8f9fa 25%, #e9ecef 25%, #e9ecef 50%, #f8f9fa 50%, #f8f9fa 75%, #e9ecef 75%, #e9ecef);
            background-size: 20px 20px;
        }
        
        .final-result {
            background: linear-gradient(135deg, #ff9a76, #74b9ff);
            color: white;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            text-align: center;
            font-size: 1.8rem;
            font-weight: bold;
            border: 3px dashed white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .action-button {
            background: #55efc4;
            color: #2d3436;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .action-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(85, 239, 196, 0.4);
        }
        
        /* Êñ∞Â¢ûÁ≠õÈÄâÈù¢ÊùøÊ†∑Âºè */
        .filter-panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid #ffeaa7;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .filter-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px dashed #ddd;
        }
        
        .filter-section:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .filter-title {
            color: #ff9a76;
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
        }
        
        .filter-title i {
            margin-right: 10px;
        }
        
        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .filter-option {
            display: flex;
            align-items: center;
            background: white;
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-option:hover {
            border-color: #ff9a76;
        }
        
        .filter-option.selected {
            background: #ff9a76;
            color: white;
            border-color: #ff9a76;
        }
        
        .filter-option input {
            margin-right: 8px;
            cursor: pointer;
        }
        
        .filter-option label {
            cursor: pointer;
            font-size: 0.95rem;
        }
        
        .filter-tag {
            display: inline-block;
            background: #74b9ff;
            color: white;
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 8px;
        }
        
        .filter-tag.vegetarian {
            background: #55efc4;
        }
        
        .filter-tag.low-carb {
            background: #a29bfe;
        }
        
        .filter-tag.high-protein {
            background: #fd79a8;
        }
        
        .filter-tag.fast-food {
            background: #fdcb6e;
        }
        
        .filter-tag.healthy {
            background: #00cec9;
        }
        
        .filter-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        .filter-button {
            background: #74b9ff;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .filter-button.apply {
            background: #55efc4;
            color: #2d3436;
        }
        
        .filter-button.reset {
            background: #dfe6e9;
            color: #636e72;
        }
        
        .filter-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .active-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .active-filter {
            background: #ff9a76;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
        }
        
        .remove-filter {
            background: none;
            border: none;
            color: white;
            margin-left: 8px;
            cursor: pointer;
            font-weight: bold;
        }
        
        /* Áä∂ÊÄÅÊåáÁ§∫Âô® */
        .filter-status {
            background: #ffeaa7;
            padding: 10px 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .filter-status span {
            font-weight: bold;
            color: #ff6b6b;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px dashed #ff7676;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .visual-item {
                min-width: 100%;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            h2 {
                font-size: 1.6rem;
            }
            
            .container {
                padding: 20px;
            }
            
            .wheel {
                width: 250px;
                height: 250px;
            }
            
            .wheel-text {
                font-size: 14px;
            }
            
            .filter-options {
                justify-content: center;
            }
            
            .filter-actions {
                justify-content: center;
            }
        }
        
        /* Animation Effects */
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        .spinning {
            animation: spin 2s linear infinite;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes celebration {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .celebration {
            animation: celebration 0.5s ease-in-out 3;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Solving Life's Three Biggest Dilemmas</h1>
            <p class="tagline">Wheel Game - What to eat for breakfast? Lunch? Dinner?</p>
        </header>
        
        <!-- Êñ∞Â¢û‰∏™ÊÄßÂåñÁ≠õÈÄâÈù¢Êùø -->
        <section class="filter-panel fade-in">
            <h2>Personalized Filter Settings</h2>
            <p>Customize your food recommendations by setting your dietary preferences and restrictions. Your selections will filter the options in the wheels below.</p>
            
            <div class="filter-section">
                <div class="filter-title">
                    <i>ü•ó</i> Dietary Preferences
                </div>
                <div class="filter-options" id="diet-preference">
                    <div class="filter-option" data-value="vegetarian">
                        <input type="checkbox" id="vegetarian" name="preference" value="vegetarian">
                        <label for="vegetarian">Vegetarian <span class="filter-tag vegetarian">No Meat</span></label>
                    </div>
                    <div class="filter-option" data-value="low-carb">
                        <input type="checkbox" id="low-carb" name="preference" value="low-carb">
                        <label for="low-carb">Low-Carb <span class="filter-tag low-carb">Keto</span></label>
                    </div>
                    <div class="filter-option" data-value="high-protein">
                        <input type="checkbox" id="high-protein" name="preference" value="high-protein">
                        <label for="high-protein">High-Protein <span class="filter-tag high-protein">Muscle</span></label>
                    </div>
                    <div class="filter-option" data-value="fast-food">
                        <input type="checkbox" id="fast-food" name="preference" value="fast-food">
                        <label for="fast-food">Fast Food <span class="filter-tag fast-food">Quick</span></label>
                    </div>
                    <div class="filter-option" data-value="healthy">
                        <input type="checkbox" id="healthy" name="preference" value="healthy">
                        <label for="healthy">Healthy <span class="filter-tag healthy">Light</span></label>
                    </div>
                </div>
            </div>
            
            <div class="filter-section">
                <div class="filter-title">
                    <i>üö´</i> Dietary Restrictions
                </div>
                <div class="filter-options" id="diet-restriction">
                    <div class="filter-option" data-value="no-spicy">
                        <input type="checkbox" id="no-spicy" name="restriction" value="no-spicy">
                        <label for="no-spicy">No Spicy Food</label>
                    </div>
                    <div class="filter-option" data-value="no-pork">
                        <input type="checkbox" id="no-pork" name="restriction" value="no-pork">
                        <label for="no-pork">No Pork (Religious)</label>
                    </div>
                    <div class="filter-option" data-value="no-seafood">
                        <input type="checkbox" id="no-seafood" name="restriction" value="no-seafood">
                        <label for="no-seafood">No Seafood (Allergy)</label>
                    </div>
                    <div class="filter-option" data-value="no-beef">
                        <input type="checkbox" id="no-beef" name="restriction" value="no-beef">
                        <label for="no-beef">No Beef (Religious)</label>
                    </div>
                    <div class="filter-option" data-value="gluten-free">
                        <input type="checkbox" id="gluten-free" name="restriction" value="gluten-free">
                        <label for="gluten-free">Gluten-Free</label>
                    </div>
                    <div class="filter-option" data-value="lactose-free">
                        <input type="checkbox" id="lactose-free" name="restriction" value="lactose-free">
                        <label for="lactose-free">Lactose-Free</label>
                    </div>
                </div>
            </div>
            
            <div class="filter-actions">
                <button class="filter-button reset" id="reset-filters">Reset Filters</button>
                <button class="filter-button apply" id="apply-filters">Apply Filters</button>
            </div>
            
            <div class="filter-status" id="filter-status">
                <div>Active filters: <span id="active-filter-count">0</span></div>
                <div>Available ingredients: <span id="available-ingredients">7</span></div>
                <div>Available methods: <span id="available-methods">6</span></div>
            </div>
            
            <div class="active-filters" id="active-filters">
                <!-- Active filters will be displayed here -->
            </div>
        </section>
        
        <section>
            <h2>Project Concept</h2>
            <p>This project aims to develop a fun wheel game to help users solve the daily dilemma of "what to eat". By using two wheels to select ingredients and cooking methods respectively, the system generates personalized dish recommendations and further provides suggestions for nearby restaurants.</p>
            
            <div class="visual-section">
                <div class="visual-item">
                    <div class="visual-title">Ingredients Wheel</div>
                    <div class="wheel-container">
                        <div class="wheel" id="ingredient-wheel">
                            <!-- Ingredient options will be dynamically generated via JavaScript -->
                        </div>
                        <div class="wheel-pointer">‚ñ≤</div>
                    </div>
                    <div class="result-display" id="ingredient-result">
                        Current Selection: <span id="ingredient-selection">Waiting for spin...</span>
                    </div>
                    <button class="spin-button" id="spin-ingredient">Spin Ingredients Wheel</button>
                    <p>Contains various common ingredients, users can spin repeatedly for different combinations</p>
                </div>
                
                <div class="visual-item">
                    <div class="visual-title">Cooking Methods Wheel</div>
                    <div class="wheel-container">
                        <div class="wheel" id="method-wheel">
                            <!-- Method options will be dynamically generated via JavaScript -->
                        </div>
                        <div class="wheel-pointer">‚ñ≤</div>
                    </div>
                    <div class="result-display" id="method-result">
                        Current Selection: <span id="method-selection">Waiting for spin...</span>
                    </div>
                    <button class="spin-button" id="spin-method">Spin Methods Wheel</button>
                    <p>Provides various cooking methods to combine with ingredients for dish creation</p>
                </div>
            </div>
            
            <div class="final-result" id="final-recommendation">
                Please spin both wheels first to get dish recommendations
            </div>
            
            <div class="action-buttons">
                <button class="action-button" id="spin-both">Spin Both Wheels</button>
                <button class="action-button" id="reset-all">Reset Selection</button>
            </div>
        </section>
        
        <section>
            <h2>Functionality Design</h2>
            <h3>Core Features</h3>
            <ul>
                <li><strong>Ingredients Wheel</strong>: Includes chicken, beef, pork, rice, potatoes, vegetables, seafood and other common ingredients</li>
                <li><strong>Cooking Methods Wheel</strong>: Provides frying, dry-frying, boiling, steaming, roasting, stir-frying and other cooking methods</li>
                <li><strong>Intelligent Recommendation</strong>: Generates reasonable dish recommendations based on ingredient and method combinations</li>
                <li><strong>Restaurant Locator</strong>: Recommends nearby restaurants based on dish recommendations using Google Maps and other map services</li>
            </ul>
            
            <h3>Special Features</h3>
            <ul>
                <li><strong>Multiple Spins</strong>: Users can spin the wheels repeatedly until they find a satisfactory combination</li>
                <li><strong>Favorites Function</strong>: Save favorite dish combinations for easy selection next time</li>
                <li><strong>Personalization Settings</strong>: Adjust recommendations based on user dietary preferences (vegetarian, low-calorie, etc.)</li>
                <li><strong>Sharing Function</strong>: Share interesting dish combinations on social media</li>
            </ul>
            
            <div class="visual-section">
                <div class="visual-item">
                    <div class="visual-title">Dish Recommendation Example</div>
                    <div id="dish-example" class="result-display" style="font-size: 1.5rem;">
                        <span class="food-item">Chicken</span> + 
                        <span class="cooking-method">Frying</span> = 
                        <strong>Crispy Chicken</strong>
                    </div>
                    <p>The system will recommend specific dishes based on reasonable ingredient and method combinations</p>
                </div>
                
                <div class="visual-item">
                    <div class="visual-title">Nearby Restaurant Recommendations</div>
                    <div class="map-preview" id="google-maps-container">
                        <!-- Google Maps embed code -->
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.18379247548!2d-73.98554268459418!3d40.757974679327!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c25855c6480299%3A0x55194ec5a1ae072e!2sTimes%20Square!5e0!3m2!1sen!2sus!4v1618335154373!5m2!1sen!2sus" 
                            width="100%" 
                            height="100%" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy"
                            title="Google Maps - Nearby Restaurant Recommendations">
                        </iframe>
                    </div>
                    <p>Displays nearby restaurants related to the recommended dish on the map</p>
                </div>
            </div>
        </section>
        
        <footer>
            <p>"Help Me Decide What to Eat Today" - Wheel Game Project Proposal</p>
            <p>¬© 2023 Food Decision Assistant - Making daily choices fun</p>
        </footer>
    </div>

    <script>
        // Êâ©Â±ïÁöÑÈ£üÊùêÊï∞ÊçÆÂ∫ìÔºåÂåÖÂê´Ê†áÁ≠æ
        const ingredientsData = [
            { name: 'Chicken', tags: ['meat', 'high-protein'], restrictions: ['no-meat', 'vegetarian'] },
            { name: 'Beef', tags: ['meat', 'high-protein'], restrictions: ['no-meat', 'vegetarian', 'no-beef'] },
            { name: 'Pork', tags: ['meat', 'high-protein'], restrictions: ['no-meat', 'vegetarian', 'no-pork'] },
            { name: 'Rice', tags: ['vegetarian', 'high-carb', 'gluten-free'], restrictions: ['low-carb'] },
            { name: 'Potato', tags: ['vegetarian', 'high-carb', 'gluten-free'], restrictions: ['low-carb'] },
            { name: 'Vegetables', tags: ['vegetarian', 'low-carb', 'healthy', 'gluten-free', 'vegan'], restrictions: [] },
            { name: 'Seafood', tags: ['high-protein', 'low-carb'], restrictions: ['no-seafood', 'vegetarian'] },
            { name: 'Tofu', tags: ['vegetarian', 'high-protein', 'healthy', 'gluten-free', 'vegan'], restrictions: [] },
            { name: 'Eggs', tags: ['high-protein', 'vegetarian'], restrictions: ['vegan'] },
            { name: 'Pasta', tags: ['vegetarian', 'high-carb'], restrictions: ['low-carb', 'gluten-free'] }
        ];
        
        // Êâ©Â±ïÁöÑÁÉπÈ•™ÊñπÊ≥ïÊï∞ÊçÆÂ∫ìÔºåÂåÖÂê´Ê†áÁ≠æ
        const cookingMethodsData = [
            { name: 'Frying', tags: ['fast-food', 'high-calorie'], restrictions: ['healthy'] },
            { name: 'Dry-frying', tags: ['fast-food'], restrictions: ['healthy'] },
            { name: 'Boiling', tags: ['healthy', 'low-calorie'], restrictions: ['fast-food'] },
            { name: 'Steaming', tags: ['healthy', 'low-calorie'], restrictions: ['fast-food'] },
            { name: 'Roasting', tags: ['high-calorie'], restrictions: ['fast-food', 'healthy'] },
            { name: 'Stir-frying', tags: ['fast-food'], restrictions: ['healthy'] },
            { name: 'Baking', tags: ['healthy'], restrictions: ['fast-food'] },
            { name: 'Grilling', tags: ['healthy', 'high-protein'], restrictions: ['fast-food'] },
            { name: 'Slow Cooking', tags: ['healthy'], restrictions: ['fast-food'] }
        ];
        
        // ÂÆö‰πâËèúÂìÅÊé®ËçêÊò†Â∞Ñ
        const dishRecommendations = {
            'Chicken-Frying': 'Crispy Chicken',
            'Chicken-Dry-frying': 'Dry-fried Chicken',
            'Chicken-Boiling': 'Chicken Soup',
            'Chicken-Steaming': 'Steamed Chicken',
            'Chicken-Roasting': 'Roast Chicken',
            'Chicken-Stir-frying': 'Stir-fried Chicken',
            'Chicken-Baking': 'Baked Chicken',
            'Chicken-Grilling': 'Grilled Chicken',
            'Chicken-Slow Cooking': 'Slow Cooked Chicken',
            
            'Beef-Frying': 'Fried Steak',
            'Beef-Dry-frying': 'Dry-fried Beef',
            'Beef-Boiling': 'Beef Soup',
            'Beef-Steaming': 'Steamed Beef',
            'Beef-Roasting': 'Roast Beef',
            'Beef-Stir-frying': 'Stir-fried Beef',
            'Beef-Baking': 'Beef Casserole',
            'Beef-Grilling': 'Grilled Steak',
            'Beef-Slow Cooking': 'Slow Cooked Beef',
            
            'Pork-Frying': 'Fried Pork Chop',
            'Pork-Dry-frying': 'Dry-fried Pork',
            'Pork-Boiling': 'Pork Soup',
            'Pork-Steaming': 'Steamed Pork',
            'Pork-Roasting': 'Roast Pork',
            'Pork-Stir-frying': 'Stir-fried Pork',
            'Pork-Baking': 'Baked Pork',
            'Pork-Grilling': 'Grilled Pork',
            'Pork-Slow Cooking': 'Slow Cooked Pork',
            
            'Rice-Frying': 'Fried Rice Balls',
            'Rice-Dry-frying': 'Dry-fried Rice',
            'Rice-Boiling': 'Porridge',
            'Rice-Steaming': 'Steamed Rice',
            'Rice-Roasting': 'Roast Rice Balls',
            'Rice-Stir-frying': 'Fried Rice',
            'Rice-Baking': 'Rice Casserole',
            'Rice-Slow Cooking': 'Slow Cooked Rice',
            
            'Potato-Frying': 'French Fries',
            'Potato-Dry-frying': 'Dry-fried Potatoes',
            'Potato-Boiling': 'Boiled Potatoes',
            'Potato-Steaming': 'Steamed Potatoes',
            'Potato-Roasting': 'Roast Potatoes',
            'Potato-Stir-frying': 'Stir-fried Potato Shreds',
            'Potato-Baking': 'Baked Potatoes',
            'Potato-Grilling': 'Grilled Potatoes',
            'Potato-Slow Cooking': 'Slow Cooked Potatoes',
            
            'Vegetables-Frying': 'Tempura',
            'Vegetables-Dry-frying': 'Dry-fried Vegetables',
            'Vegetables-Boiling': 'Vegetable Soup',
            'Vegetables-Steaming': 'Steamed Vegetables',
            'Vegetables-Roasting': 'Roast Vegetables',
            'Vegetables-Stir-frying': 'Stir-fried Greens',
            'Vegetables-Baking': 'Baked Vegetables',
            'Vegetables-Grilling': 'Grilled Vegetables',
            'Vegetables-Slow Cooking': 'Slow Cooked Vegetables',
            
            'Seafood-Frying': 'Fried Fish',
            'Seafood-Dry-frying': 'Dry-fried Seafood',
            'Seafood-Boiling': 'Seafood Soup',
            'Seafood-Steaming': 'Steamed Seafood',
            'Seafood-Roasting': 'Roast Seafood',
            'Seafood-Stir-frying': 'Stir-fried Seafood',
            'Seafood-Baking': 'Baked Fish',
            'Seafood-Grilling': 'Grilled Seafood',
            'Seafood-Slow Cooking': 'Slow Cooked Seafood',
            
            'Tofu-Frying': 'Fried Tofu',
            'Tofu-Dry-frying': 'Dry-fried Tofu',
            'Tofu-Boiling': 'Tofu Soup',
            'Tofu-Steaming': 'Steamed Tofu',
            'Tofu-Roasting': 'Roast Tofu',
            'Tofu-Stir-frying': 'Stir-fried Tofu',
            'Tofu-Baking': 'Baked Tofu',
            'Tofu-Grilling': 'Grilled Tofu',
            'Tofu-Slow Cooking': 'Slow Cooked Tofu',
            
            'Eggs-Frying': 'Fried Eggs',
            'Eggs-Dry-frying': 'Dry-fried Eggs',
            'Eggs-Boiling': 'Boiled Eggs',
            'Eggs-Steaming': 'Steamed Eggs',
            'Eggs-Roasting': 'Roast Eggs',
            'Eggs-Stir-frying': 'Scrambled Eggs',
            'Eggs-Baking': 'Baked Eggs',
            'Eggs-Grilling': 'Grilled Eggs',
            'Eggs-Slow Cooking': 'Slow Cooked Eggs',
            
            'Pasta-Frying': 'Fried Pasta',
            'Pasta-Dry-frying': 'Dry-fried Pasta',
            'Pasta-Boiling': 'Boiled Pasta',
            'Pasta-Steaming': 'Steamed Pasta',
            'Pasta-Roasting': 'Roast Pasta',
            'Pasta-Stir-frying': 'Stir-fried Pasta',
            'Pasta-Baking': 'Baked Pasta',
            'Pasta-Grilling': 'Grilled Pasta',
            'Pasta-Slow Cooking': 'Slow Cooked Pasta'
        };
        
        // ÂÆö‰πâËΩ¨ÁõòÈ¢úËâ≤
        const ingredientColors = ['#ff7676', '#74b9ff', '#55efc4', '#ffeaa7', '#a29bfe', '#fd79a8', '#00cec9', '#81ecec', '#fab1a0', '#e17055'];
        const methodColors = ['#ff7676', '#74b9ff', '#55efc4', '#ffeaa7', '#a29bfe', '#fd79a8', '#00cec9', '#81ecec', '#fab1a0'];
        
        // ÂΩìÂâçÈÄâ‰∏≠ÁöÑÈ£üÊùêÂíåÊñπÊ≥ï
        let currentIngredient = null;
        let currentMethod = null;
        
        // ËΩ¨ÁõòÊòØÂê¶Âú®ÊóãËΩ¨‰∏≠
        let isSpinning = false;
        
        // ÂΩìÂâçÁ≠õÈÄâÊù°‰ª∂
        let activeFilters = {
            preferences: [], // È•ÆÈ£üÂÅèÂ•Ω
            restrictions: [] // ÂøåÂè£ÈÄâÈ°π
        };
        
        // ËøáÊª§ÂêéÁöÑÈ£üÊùêÂíåÊñπÊ≥ï
        let filteredIngredients = [];
        let filteredMethods = [];
        
        // ÂàùÂßãÂåñÈ°µÈù¢
        document.addEventListener('DOMContentLoaded', function() {
            // Âä†ËΩΩ‰øùÂ≠òÁöÑÁ≠õÈÄâÊù°‰ª∂
            loadSavedFilters();
            
            // ÂàùÂßãÂåñÁ≠õÈÄâÈÄâÈ°π
            initializeFilterOptions();
            
            // Â∫îÁî®ÈªòËÆ§Á≠õÈÄâÊù°‰ª∂
            applyFilters();
            
            // ‰∏∫Á≠õÈÄâÊåâÈíÆÊ∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
            document.getElementById('apply-filters').addEventListener('click', applyFilters);
            document.getElementById('reset-filters').addEventListener('click', resetFilters);
            
            // ‰∏∫ËΩ¨ÁõòÊåâÈíÆÊ∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
            document.getElementById('spin-ingredient').addEventListener('click', () => spinWheel('ingredient'));
            document.getElementById('spin-method').addEventListener('click', () => spinWheel('method'));
            document.getElementById('spin-both').addEventListener('click', spinBothWheels);
            document.getElementById('reset-all').addEventListener('click', resetAll);
            
            // ‰∏∫Á§∫‰æãËèúÂìÅÊ∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
            document.getElementById('dish-example').addEventListener('click', function() {
                updateMapBasedOnFood('Chicken', 'Frying');
            });
        });
        
        // ÂàùÂßãÂåñÁ≠õÈÄâÈÄâÈ°π
        function initializeFilterOptions() {
            // ‰∏∫Á≠õÈÄâÈÄâÈ°πÊ∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
            const filterOptions = document.querySelectorAll('.filter-option');
            filterOptions.forEach(option => {
                option.addEventListener('click', function(e) {
                    const checkbox = this.querySelector('input[type="checkbox"]');
                    if (e.target !== checkbox) {
                        checkbox.checked = !checkbox.checked;
                        this.classList.toggle('selected', checkbox.checked);
                    }
                });
                
                // ‰∏∫Â§çÈÄâÊ°ÜÊ∑ªÂä†‰∫ã‰ª∂ÔºåÁ°Æ‰øùÁÇπÂáªÂ§çÈÄâÊ°ÜÊó∂‰πüÊõ¥Êñ∞Ê†∑Âºè
                const checkbox = option.querySelector('input[type="checkbox"]');
                checkbox.addEventListener('change', function() {
                    option.classList.toggle('selected', this.checked);
                });
            });
        }
        
        // Â∫îÁî®Á≠õÈÄâÊù°‰ª∂
        function applyFilters() {
            // Ëé∑ÂèñÈÄâ‰∏≠ÁöÑÈ•ÆÈ£üÂÅèÂ•Ω
            const preferenceCheckboxes = document.querySelectorAll('#diet-preference input[type="checkbox"]:checked');
            activeFilters.preferences = Array.from(preferenceCheckboxes).map(cb => cb.value);
            
            // Ëé∑ÂèñÈÄâ‰∏≠ÁöÑÂøåÂè£ÈÄâÈ°π
            const restrictionCheckboxes = document.querySelectorAll('#diet-restriction input[type="checkbox"]:checked');
            activeFilters.restrictions = Array.from(restrictionCheckboxes).map(cb => cb.value);
            
            // ‰øùÂ≠òÁ≠õÈÄâÊù°‰ª∂Âà∞Êú¨Âú∞Â≠òÂÇ®
            saveFilters();
            
            // ËøáÊª§È£üÊùê
            filterIngredients();
            
            // ËøáÊª§ÁÉπÈ•™ÊñπÊ≥ï
            filterCookingMethods();
            
            // Êõ¥Êñ∞ËΩ¨Áõò
            updateWheels();
            
            // Êõ¥Êñ∞Áä∂ÊÄÅÊòæÁ§∫
            updateFilterStatus();
            
            // ÊòæÁ§∫Â∫îÁî®ÊàêÂäüÁöÑÊèêÁ§∫
            showFilterAppliedMessage();
        }
        
        // ËøáÊª§È£üÊùê
        function filterIngredients() {
            filteredIngredients = ingredientsData.filter(ingredient => {
                // Ê£ÄÊü•ÊòØÂê¶Êª°Ë∂≥È•ÆÈ£üÂÅèÂ•Ω
                if (activeFilters.preferences.length > 0) {
                    const hasMatchingPreference = activeFilters.preferences.some(pref => {
                        switch(pref) {
                            case 'vegetarian':
                                return ingredient.tags.includes('vegetarian');
                            case 'low-carb':
                                return ingredient.tags.includes('low-carb') && !ingredient.tags.includes('high-carb');
                            case 'high-protein':
                                return ingredient.tags.includes('high-protein');
                            case 'fast-food':
                                // È£üÊùêÊ≤°Êúâfast-foodÊ†áÁ≠æÔºå‰∏çÊ†πÊçÆËøô‰∏™ËøáÊª§
                                return true;
                            case 'healthy':
                                return ingredient.tags.includes('healthy');
                            default:
                                return true;
                        }
                    });
                    
                    if (!hasMatchingPreference) return false;
                }
                
                // Ê£ÄÊü•ÊòØÂê¶ËøùÂèçÂøåÂè£ÈÄâÈ°π
                if (activeFilters.restrictions.length > 0) {
                    const hasRestriction = activeFilters.restrictions.some(restriction => {
                        switch(restriction) {
                            case 'no-spicy':
                                // Ëæ£Âë≥‰∏çÊòØÈ£üÊùêÂ±ûÊÄßÔºåËøôÈáå‰∏çÊ†πÊçÆËøô‰∏™ËøáÊª§
                                return false;
                            case 'no-pork':
                                return ingredient.restrictions.includes('no-pork');
                            case 'no-seafood':
                                return ingredient.restrictions.includes('no-seafood');
                            case 'no-beef':
                                return ingredient.restrictions.includes('no-beef');
                            case 'gluten-free':
                                return ingredient.tags.includes('gluten-free') || !ingredient.name.includes('Pasta');
                            case 'lactose-free':
                                // È£üÊùê‰∏çÂê´‰π≥Á≥ñÔºåËøôÈáå‰∏çÊ†πÊçÆËøô‰∏™ËøáÊª§
                                return false;
                            default:
                                return false;
                        }
                    });
                    
                    if (hasRestriction) return false;
                }
                
                // Â¶ÇÊûúÈÄâÊã©‰∫ÜÁ¥†È£üÔºåËøáÊª§ÊéâÊâÄÊúâËÇâÁ±ª
                if (activeFilters.preferences.includes('vegetarian') && 
                    (ingredient.name === 'Chicken' || ingredient.name === 'Beef' || ingredient.name === 'Pork')) {
                    return false;
                }
                
                return true;
            });
            
            // Â¶ÇÊûúËøáÊª§ÂêéÊ≤°ÊúâÈ£üÊùêÔºåÂàôÊòæÁ§∫ÊâÄÊúâÈ£üÊùê
            if (filteredIngredients.length === 0) {
                filteredIngredients = ingredientsData;
            }
        }
        
        // ËøáÊª§ÁÉπÈ•™ÊñπÊ≥ï
        function filterCookingMethods() {
            filteredMethods = cookingMethodsData.filter(method => {
                // Ê£ÄÊü•ÊòØÂê¶Êª°Ë∂≥È•ÆÈ£üÂÅèÂ•Ω
                if (activeFilters.preferences.length > 0) {
                    const hasMatchingPreference = activeFilters.preferences.some(pref => {
                        switch(pref) {
                            case 'vegetarian':
                                // ÁÉπÈ•™ÊñπÊ≥ï‰∏éÁ¥†È£üÊó†ÂÖ≥
                                return true;
                            case 'low-carb':
                                // ÁÉπÈ•™ÊñπÊ≥ï‰∏é‰ΩéÁ¢≥Ê∞¥Êó†ÂÖ≥
                                return true;
                            case 'high-protein':
                                return method.tags.includes('high-protein');
                            case 'fast-food':
                                return method.tags.includes('fast-food');
                            case 'healthy':
                                return method.tags.includes('healthy');
                            default:
                                return true;
                        }
                    });
                    
                    if (!hasMatchingPreference) return false;
                }
                
                // Ê£ÄÊü•ÊòØÂê¶ËøùÂèçÂøåÂè£ÈÄâÈ°π
                if (activeFilters.restrictions.length > 0) {
                    const hasRestriction = activeFilters.restrictions.some(restriction => {
                        switch(restriction) {
                            case 'no-spicy':
                                // Ëæ£Âë≥‰∏çÊòØÁÉπÈ•™ÊñπÊ≥ïÂ±ûÊÄß
                                return false;
                            default:
                                return false;
                        }
                    });
                    
                    if (hasRestriction) return false;
                }
                
                // Â¶ÇÊûúÈÄâÊã©‰∫ÜÂÅ•Â∫∑ÈÄâÈ°πÔºåËøáÊª§Êéâ‰∏çÂÅ•Â∫∑ÁöÑÁÉπÈ•™ÊñπÊ≥ï
                if (activeFilters.preferences.includes('healthy') && method.restrictions.includes('healthy')) {
                    return false;
                }
                
                // Â¶ÇÊûúÈÄâÊã©‰∫ÜÂø´È§êÈÄâÈ°πÔºåËøáÊª§ÊéâÊÖ¢ÈÄüÁÉπÈ•™ÊñπÊ≥ï
                if (activeFilters.preferences.includes('fast-food') && method.restrictions.includes('fast-food')) {
                    return false;
                }
                
                return true;
            });
            
            // Â¶ÇÊûúËøáÊª§ÂêéÊ≤°ÊúâÁÉπÈ•™ÊñπÊ≥ïÔºåÂàôÊòæÁ§∫ÊâÄÊúâÁÉπÈ•™ÊñπÊ≥ï
            if (filteredMethods.length === 0) {
                filteredMethods = cookingMethodsData;
            }
        }
        
        // Êõ¥Êñ∞ËΩ¨Áõò
        function updateWheels() {
            // ÂàõÂª∫È£üÊùêËΩ¨Áõò
            createWheel('ingredient-wheel', filteredIngredients.map(i => i.name), ingredientColors.slice(0, filteredIngredients.length));
            
            // ÂàõÂª∫ÁÉπÈ•™ÊñπÊ≥ïËΩ¨Áõò
            createWheel('method-wheel', filteredMethods.map(m => m.name), methodColors.slice(0, filteredMethods.length));
            
            // ÈáçÁΩÆÂΩìÂâçÈÄâÊã©
            currentIngredient = null;
            currentMethod = null;
            document.getElementById('ingredient-selection').textContent = 'Waiting for spin...';
            document.getElementById('method-selection').textContent = 'Waiting for spin...';
            document.getElementById('final-recommendation').innerHTML = 'Please spin both wheels first to get dish recommendations';
        }
        
        // ÂàõÂª∫ËΩ¨ÁõòÂáΩÊï∞
        function createWheel(wheelId, options, colors) {
            const wheel = document.getElementById(wheelId);
            wheel.innerHTML = '';
            
            const anglePerSection = 360 / options.length;
            
            // ÂàõÂª∫ÊâáÂΩ¢ÈÉ®ÂàÜ
            for (let i = 0; i < options.length; i++) {
                const section = document.createElement('div');
                section.className = 'wheel-section';
                section.dataset.index = i;
                section.dataset.value = options[i];
                
                // ËÆæÁΩÆÊâáÂΩ¢ËßíÂ∫¶
                const startAngle = i * anglePerSection;
                
                // ËÆæÁΩÆÊâáÂΩ¢ËÉåÊôØÈ¢úËâ≤
                section.style.background = colors[i];
                
                // ÊóãËΩ¨ÊâáÂΩ¢Âà∞Ê≠£Á°Æ‰ΩçÁΩÆ
                section.style.transform = `rotate(${startAngle}deg)`;
                
                // Ê∑ªÂä†ÊñáÊú¨
                const textDiv = document.createElement('div');
                textDiv.className = 'wheel-text';
                textDiv.textContent = options[i];
                
                section.appendChild(textDiv);
                wheel.appendChild(section);
            }
            
            // Ê∑ªÂä†‰∏≠ÂøÉÁÇπ
            const center = document.createElement('div');
            center.className = 'wheel-center';
            center.addEventListener('click', () => {
                if (wheelId === 'ingredient-wheel') {
                    spinWheel('ingredient');
                } else {
                    spinWheel('method');
                }
            });
            wheel.appendChild(center);
        }
        
        // Êõ¥Êñ∞Á≠õÈÄâÁä∂ÊÄÅÊòæÁ§∫
        function updateFilterStatus() {
            // Êõ¥Êñ∞Ê¥ªÂä®Á≠õÈÄâÂô®Êï∞Èáè
            const totalFilters = activeFilters.preferences.length + activeFilters.restrictions.length;
            document.getElementById('active-filter-count').textContent = totalFilters;
            
            // Êõ¥Êñ∞ÂèØÁî®È£üÊùêÂíåÊñπÊ≥ïÊï∞Èáè
            document.getElementById('available-ingredients').textContent = filteredIngredients.length;
            document.getElementById('available-methods').textContent = filteredMethods.length;
            
            // Êõ¥Êñ∞Ê¥ªÂä®Á≠õÈÄâÂô®ÊòæÁ§∫
            const activeFiltersContainer = document.getElementById('active-filters');
            activeFiltersContainer.innerHTML = '';
            
            // Ê∑ªÂä†È•ÆÈ£üÂÅèÂ•ΩÁ≠õÈÄâÂô®
            activeFilters.preferences.forEach(pref => {
                const filterElement = document.createElement('div');
                filterElement.className = 'active-filter';
                filterElement.innerHTML = `
                    ${getFilterLabel(pref)}
                    <button class="remove-filter" data-type="preference" data-value="${pref}">√ó</button>
                `;
                activeFiltersContainer.appendChild(filterElement);
            });
            
            // Ê∑ªÂä†ÂøåÂè£ÈÄâÈ°πÁ≠õÈÄâÂô®
            activeFilters.restrictions.forEach(restriction => {
                const filterElement = document.createElement('div');
                filterElement.className = 'active-filter';
                filterElement.innerHTML = `
                    ${getFilterLabel(restriction)}
                    <button class="remove-filter" data-type="restriction" data-value="${restriction}">√ó</button>
                `;
                activeFiltersContainer.appendChild(filterElement);
            });
            
            // ‰∏∫Âà†Èô§ÊåâÈíÆÊ∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
            document.querySelectorAll('.remove-filter').forEach(button => {
                button.addEventListener('click', function() {
                    const type = this.dataset.type;
                    const value = this.dataset.value;
                    
                    // ‰ªéÊ¥ªÂä®Á≠õÈÄâ‰∏≠ÁßªÈô§
                    if (type === 'preference') {
                        activeFilters.preferences = activeFilters.preferences.filter(p => p !== value);
                        // ÂèñÊ∂àÈÄâ‰∏≠ÂØπÂ∫îÁöÑÂ§çÈÄâÊ°Ü
                        const checkbox = document.querySelector(`#diet-preference input[value="${value}"]`);
                        if (checkbox) checkbox.checked = false;
                        const option = checkbox.closest('.filter-option');
                        if (option) option.classList.remove('selected');
                    } else {
                        activeFilters.restrictions = activeFilters.restrictions.filter(r => r !== value);
                        // ÂèñÊ∂àÈÄâ‰∏≠ÂØπÂ∫îÁöÑÂ§çÈÄâÊ°Ü
                        const checkbox = document.querySelector(`#diet-restriction input[value="${value}"]`);
                        if (checkbox) checkbox.checked = false;
                        const option = checkbox.closest('.filter-option');
                        if (option) option.classList.remove('selected');
                    }
                    
                    // ÈáçÊñ∞Â∫îÁî®Á≠õÈÄâÊù°‰ª∂
                    applyFilters();
                });
            });
        }
        
        // Ëé∑ÂèñÁ≠õÈÄâÂô®Ê†áÁ≠æ
        function getFilterLabel(filterValue) {
            const labels = {
                'vegetarian': 'Vegetarian',
                'low-carb': 'Low-Carb',
                'high-protein': 'High-Protein',
                'fast-food': 'Fast Food',
                'healthy': 'Healthy',
                'no-spicy': 'No Spicy',
                'no-pork': 'No Pork',
                'no-seafood': 'No Seafood',
                'no-beef': 'No Beef',
                'gluten-free': 'Gluten-Free',
                'lactose-free': 'Lactose-Free'
            };
            
            return labels[filterValue] || filterValue;
        }
        
        // ÊòæÁ§∫Á≠õÈÄâÂ∫îÁî®ÊàêÂäüÁöÑÊ∂àÊÅØ
        function showFilterAppliedMessage() {
            const filterStatus = document.getElementById('filter-status');
            filterStatus.classList.add('pulse');
            setTimeout(() => {
                filterStatus.classList.remove('pulse');
            }, 1000);
        }
        
        // ÈáçÁΩÆÁ≠õÈÄâÊù°‰ª∂
        function resetFilters() {
            // ÂèñÊ∂àÊâÄÊúâÂ§çÈÄâÊ°ÜÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ
            document.querySelectorAll('.filter-option input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // ÁßªÈô§ÊâÄÊúâÈÄâ‰∏≠Ê†∑Âºè
            document.querySelectorAll('.filter-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // ÈáçÁΩÆÊ¥ªÂä®Á≠õÈÄâÂô®
            activeFilters = {
                preferences: [],
                restrictions: []
            };
            
            // Ê∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®
            localStorage.removeItem('foodWheelFilters');
            
            // Â∫îÁî®Á≠õÈÄâÊù°‰ª∂ÔºàÂ∞ÜÊòæÁ§∫ÊâÄÊúâÈÄâÈ°πÔºâ
            applyFilters();
        }
        
        // ‰øùÂ≠òÁ≠õÈÄâÊù°‰ª∂Âà∞Êú¨Âú∞Â≠òÂÇ®
        function saveFilters() {
            localStorage.setItem('foodWheelFilters', JSON.stringify(activeFilters));
        }
        
        // ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩÁ≠õÈÄâÊù°‰ª∂
        function loadSavedFilters() {
            const savedFilters = localStorage.getItem('foodWheelFilters');
            if (savedFilters) {
                activeFilters = JSON.parse(savedFilters);
                
                // ÊÅ¢Â§çÂ§çÈÄâÊ°ÜÁä∂ÊÄÅ
                activeFilters.preferences.forEach(pref => {
                    const checkbox = document.querySelector(`#diet-preference input[value="${pref}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                        const option = checkbox.closest('.filter-option');
                        if (option) option.classList.add('selected');
                    }
                });
                
                activeFilters.restrictions.forEach(restriction => {
                    const checkbox = document.querySelector(`#diet-restriction input[value="${restriction}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                        const option = checkbox.closest('.filter-option');
                        if (option) option.classList.add('selected');
                    }
                });
            }
        }
        
        // ÊóãËΩ¨ËΩ¨ÁõòÂáΩÊï∞
        function spinWheel(type) {
            if (isSpinning) return;
            
            isSpinning = true;
            const wheelId = type === 'ingredient' ? 'ingredient-wheel' : 'method-wheel';
            const wheel = document.getElementById(wheelId);
            const spinButton = type === 'ingredient' ? 
                document.getElementById('spin-ingredient') : 
                document.getElementById('spin-method');
            
            // Á¶ÅÁî®ÊåâÈíÆ
            spinButton.disabled = true;
            document.getElementById('spin-both').disabled = true;
            
            // ÈöèÊú∫ÈÄâÊã©ÁªìÊûú
            const options = type === 'ingredient' ? filteredIngredients.map(i => i.name) : filteredMethods.map(m => m.name);
            const randomIndex = Math.floor(Math.random() * options.length);
            const selectedOption = options[randomIndex];
            
            // ËÆ°ÁÆóÊóãËΩ¨ËßíÂ∫¶ - Á°Æ‰øùÊåáÈíàÊåáÂêëÈÄâ‰∏≠ÁöÑÈÄâÈ°π
            const anglePerSection = 360 / options.length;
            
            // ËÆ°ÁÆóÈÄâ‰∏≠ÈÄâÈ°πÁöÑ‰∏≠ÂøÉËßíÂ∫¶
            const selectedAngleCenter = randomIndex * anglePerSection + anglePerSection / 2;
            
            // ÊåáÈíàÊåáÂêë0Â∫¶ÔºåÊàë‰ª¨Â∏åÊúõÈÄâ‰∏≠ÁöÑÈÄâÈ°πÊóãËΩ¨Âà∞ÊåáÈíà‰ΩçÁΩÆ
            const fullTurns = 5; // Ëá≥Â∞ë5Âúà
            const targetAngle = fullTurns * 360 + (360 - selectedAngleCenter);
            
            // Â∫îÁî®ÊóãËΩ¨Âä®Áîª
            wheel.style.transition = 'transform 3s cubic-bezier(0.2, 0.8, 0.3, 1)';
            wheel.style.transform = `translate(-50%, -50%) rotate(${targetAngle}deg)`;
            
            // Êõ¥Êñ∞ÁªìÊûúÊòæÁ§∫
            setTimeout(() => {
                const resultSpan = type === 'ingredient' ? 
                    document.getElementById('ingredient-selection') : 
                    document.getElementById('method-selection');
                
                resultSpan.textContent = selectedOption;
                
                if (type === 'ingredient') {
                    currentIngredient = selectedOption;
                } else {
                    currentMethod = selectedOption;
                }
                
                // ÂêØÁî®ÊåâÈíÆ
                spinButton.disabled = false;
                document.getElementById('spin-both').disabled = false;
                isSpinning = false;
                
                // Êõ¥Êñ∞ÊúÄÁªàÊé®Ëçê
                updateFinalRecommendation();
                
                // Ê∑ªÂä†Â∫ÜÁ•ùÂä®Áîª
                const resultDisplay = type === 'ingredient' ? 
                    document.getElementById('ingredient-result') : 
                    document.getElementById('method-result');
                resultDisplay.classList.add('celebration');
                setTimeout(() => resultDisplay.classList.remove('celebration'), 1500);
            }, 3000);
        }
        
        // ÂêåÊó∂ÊóãËΩ¨‰∏§‰∏™ËΩ¨Áõò
        function spinBothWheels() {
            if (isSpinning) return;
            
            isSpinning = true;
            
            // Á¶ÅÁî®ÊâÄÊúâÊåâÈíÆ
            document.getElementById('spin-ingredient').disabled = true;
            document.getElementById('spin-method').disabled = true;
            document.getElementById('spin-both').disabled = true;
            
            // ÈöèÊú∫ÈÄâÊã©ÁªìÊûú
            const ingredientOptions = filteredIngredients.map(i => i.name);
            const methodOptions = filteredMethods.map(m => m.name);
            
            const ingredientIndex = Math.floor(Math.random() * ingredientOptions.length);
            const methodIndex = Math.floor(Math.random() * methodOptions.length);
            const selectedIngredient = ingredientOptions[ingredientIndex];
            const selectedMethod = methodOptions[methodIndex];
            
            // ËÆ°ÁÆóÊóãËΩ¨ËßíÂ∫¶
            const ingredientAnglePerSection = 360 / ingredientOptions.length;
            const methodAnglePerSection = 360 / methodOptions.length;
            
            // ËÆ°ÁÆóÈÄâ‰∏≠ÈÄâÈ°πÁöÑ‰∏≠ÂøÉËßíÂ∫¶
            const ingredientAngleCenter = ingredientIndex * ingredientAnglePerSection + ingredientAnglePerSection / 2;
            const methodAngleCenter = methodIndex * methodAnglePerSection + methodAnglePerSection / 2;
            
            // ËÆ°ÁÆóÈúÄË¶ÅÁöÑÊóãËΩ¨ËßíÂ∫¶
            const fullTurns = 5;
            const ingredientTargetAngle = fullTurns * 360 + (360 - ingredientAngleCenter);
            const methodTargetAngle = fullTurns * 360 + (360 - methodAngleCenter);
            
            // Â∫îÁî®ÊóãËΩ¨Âä®Áîª
            const ingredientWheel = document.getElementById('ingredient-wheel');
            const methodWheel = document.getElementById('method-wheel');
            
            ingredientWheel.style.transition = 'transform 3s cubic-bezier(0.2, 0.8, 0.3, 1)';
            methodWheel.style.transition = 'transform 3s cubic-bezier(0.2, 0.8, 0.3, 1)';
            
            ingredientWheel.style.transform = `translate(-50%, -50%) rotate(${ingredientTargetAngle}deg)`;
            methodWheel.style.transform = `translate(-50%, -50%) rotate(${methodTargetAngle}deg)`;
            
            // Êõ¥Êñ∞ÁªìÊûúÊòæÁ§∫
            setTimeout(() => {
                document.getElementById('ingredient-selection').textContent = selectedIngredient;
                document.getElementById('method-selection').textContent = selectedMethod;
                
                currentIngredient = selectedIngredient;
                currentMethod = selectedMethod;
                
                // ÂêØÁî®ÊåâÈíÆ
                document.getElementById('spin-ingredient').disabled = false;
                document.getElementById('spin-method').disabled = false;
                document.getElementById('spin-both').disabled = false;
                isSpinning = false;
                
                // Êõ¥Êñ∞ÊúÄÁªàÊé®Ëçê
                updateFinalRecommendation();
                
                // Ê∑ªÂä†Â∫ÜÁ•ùÂä®Áîª
                const finalRecommendation = document.getElementById('final-recommendation');
                finalRecommendation.classList.add('celebration');
                setTimeout(() => finalRecommendation.classList.remove('celebration'), 1500);
            }, 3000);
        }
        
        // Êõ¥Êñ∞ÊúÄÁªàÊé®Ëçê
        function updateFinalRecommendation() {
            if (currentIngredient && currentMethod) {
                const dishKey = `${currentIngredient}-${currentMethod}`;
                const dishName = dishRecommendations[dishKey] || `${currentIngredient} ${currentMethod}`;
                
                const finalRecommendation = document.getElementById('final-recommendation');
                finalRecommendation.innerHTML = `
                    <div style="margin-bottom: 10px;">Today's Recommended Dish</div>
                    <div style="font-size: 2.5rem; margin-bottom: 15px;">${dishName}</div>
                    <div style="font-size: 1.2rem;">
                        <span class="food-item">${currentIngredient}</span> + 
                        <span class="cooking-method">${currentMethod}</span>
                    </div>
                `;
                
                // Êõ¥Êñ∞Âú∞Âõæ
                updateMapBasedOnFood(currentIngredient, currentMethod);
            }
        }
        
        // Ê†πÊçÆÈ£üÁâ©Êõ¥Êñ∞Âú∞Âõæ
        function updateMapBasedOnFood(food, method) {
            const mapContainer = document.getElementById('google-maps-container');
            let mapUrl = "";
            
            // Ê†πÊçÆÈ£üÁâ©ÈÄâÊã©‰∏çÂêåÁöÑÂú∞Âõæ‰ΩçÁΩÆÔºàÁ§∫‰æãÔºâ
            if (food.includes('Chicken') && method.includes('Frying')) {
                mapUrl = 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.18379247548!2d-73.98554268459418!3d40.757974679327!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c25855c6480299%3A0x55194ec5a1ae072e!2sTimes%20Square!5e0!3m2!1sen!2sus!4v1618335154373!5m2!1sen!2sus';
            } else if (food.includes('Beef')) {
                mapUrl = 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3153.681667617988!2d-122.41941518468177!3d37.77492977975902!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8085808c7b6f5c1f%3A0x3fd5b6a4f3c8e3f5!2sGolden%20Gate%20Bridge!5e0!3m2!1sen!2sus!4v1618335245678!5m2!1sen!2sus';
            } else if (food.includes('Seafood')) {
                mapUrl = 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d119066.41248947742!2d-0.3817856377737839!3d51.52855824285741!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47d8a00baf21de75%3A0x52963a5addd52a99!2sLondon!5e0!3m2!1sen!2sus!4v1618335284347!5m2!1sen!2sus';
            } else {
                mapUrl = 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2483.680487885226!2d-0.1277583842294097!3d51.500729179634!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x487604c38c8cd1d9%3A0xb78f2474b9a45aa9!2sBig%20Ben!5e0!3m2!1sen!2sus!4v1618335284347!5m2!1sen!2sus';
            }
            
            // Êõ¥Êñ∞iframeÁöÑsrcÂ±ûÊÄß
            const iframe = mapContainer.querySelector('iframe');
            iframe.src = mapUrl;
            
            // ÊòæÁ§∫ÈÄöÁü•
            console.log(`Map updated to show nearby ${food} ${method} restaurants!`);
        }
        
        // ÈáçÁΩÆÊâÄÊúâÈÄâÊã©
        function resetAll() {
            currentIngredient = null;
            currentMethod = null;
            
            document.getElementById('ingredient-selection').textContent = 'Waiting for spin...';
            document.getElementById('method-selection').textContent = 'Waiting for spin...';
            
            document.getElementById('final-recommendation').innerHTML = 'Please spin both wheels first to get dish recommendations';
            
            // ÈáçÁΩÆËΩ¨Áõò‰ΩçÁΩÆ
            const ingredientWheel = document.getElementById('ingredient-wheel');
            const methodWheel = document.getElementById('method-wheel');
            
            ingredientWheel.style.transition = 'transform 0.5s ease-out';
            methodWheel.style.transition = 'transform 0.5s ease-out';
            
            ingredientWheel.style.transform = 'translate(-50%, -50%) rotate(0deg)';
            methodWheel.style.transform = 'translate(-50%, -50%) rotate(0deg)';
            
            // ÈáçÁΩÆÂú∞ÂõæÂà∞ÈªòËÆ§‰ΩçÁΩÆ
            const mapContainer = document.getElementById('google-maps-container');
            const iframe = mapContainer.querySelector('iframe');
            iframe.src = 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.18379247548!2d-73.98554268459418!3d40.757974679327!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c25855c6480299%3A0x55194ec5a1ae072e!2sTimes%20Square!5e0!3m2!1sen!2sus!4v1618335154373!5m2!1sen!2sus';
        }
    </script>
</body>
</html>
